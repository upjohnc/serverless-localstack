<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/black.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-markdown>
            <script type="text/template">
              ## Serverless Framework
                - localstack docker container <!-- .element: class="fragment" data-fragment-index="1" -->
                - Basic lambda deploy <!-- .element: class="fragment" data-fragment-index="2" -->
            </script>
        </section>
        <section>
          <pre><code data-line-numbers="4-8|18-28|39-42">
service: LocalStackTesting

functions:
  Basic:
    handler: src/basic.run
    description: Log hello
    name: ${self:custom.stage}-${self:service}-Basic

provider:
  stackName: ${self:custom.stage}-${self:service}
  versionFunctions: false
  name: aws
  timeout: 200
  runtime: python3.9
  region: ${file(./config/${self:custom.stage}.yml):region}
  logRetentionInDays: 30
  iam:
    role:
      name: ${self:custom.stage}-${self:service}
      statements:
        - Effect: Allow
          Action:
            - "s3:DeleteObject"
            - "s3:PutObject"
            - "s3:GetObject"
          Resource:
            - "*"
        - Effect: Allow
          Action:
            - "s3:List*"
          Resource:
            - "*"

  deploymentBucket:
    name: ${file(./config/${self:custom.stage}.yml):deploy_bucket}
  environment: ${file(./config/${self:custom.stage}.yml):env_vars}

plugins:
  - serverless-python-requirements
  - serverless-offline
  - serverless-localstack

custom:
  stage: ${opt:stage, 'dev'}
  pythonRequirements:
    usePoetry: true
  localstack:
    stages:
      local
          </code></pre>
        </section>
        <section>
          show that things are set up for simplifying the deploy
        </section>
        <section>
          iam is created for the service
        </section>
        <section>
          show poetry at work
        </section>
        <section>
          show simplicity to update code and deploy
        </section>
        <section>
          slide 2
          dynamo db
        </section>
        <section>
          show that you can add a resource
        </section>
        <section>
          adding the table structure as a nice to have : it isn't obligatory
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
      });
    </script>
  </body>
</html>
